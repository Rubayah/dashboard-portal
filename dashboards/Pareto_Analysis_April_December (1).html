<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pareto Analysis - April to December 2025</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; padding: 20px; min-height: 100vh; }
        .container { max-width: 1600px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 2px 20px rgba(0,0,0,0.08); overflow: hidden; }
        .header { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.2em; margin-bottom: 8px; font-weight: 600; }
        .header p { font-size: 1em; opacity: 0.95; font-weight: 300; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 30px; background: #fafbfc; }
        .metric-card { background: white; border-radius: 10px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); border-left: 4px solid; }
        .metric-card.all { border-left-color: #10b981; }
        .metric-card.mea { border-left-color: #3b82f6; }
        .metric-card.rc { border-left-color: #8b5cf6; }
        .metric-label { font-size: 0.85em; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; font-weight: 600; }
        .metric-value { font-size: 2em; font-weight: 700; color: #1e293b; margin-bottom: 12px; }
        .metric-subtitle { font-size: 0.85em; color: #64748b; padding-top: 8px; border-top: 1px solid #e2e8f0; }
        .charts-section { padding: 30px; }
        .chart-container { background: white; border-radius: 10px; padding: 24px; margin-bottom: 30px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); }
        .chart-title { font-size: 1.4em; color: #1e293b; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #e2e8f0; font-weight: 600; }
        .insights { background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); color: white; padding: 30px; margin: 30px; border-radius: 10px; }
        .insights h2 { font-size: 1.6em; margin-bottom: 20px; font-weight: 600; }
        .insights ul { list-style: none; padding-left: 0; }
        .insights li { padding: 10px 0; padding-left: 28px; position: relative; font-size: 1em; line-height: 1.7; font-weight: 300; }
        .insights li:before { content: "â†’"; position: absolute; left: 0; font-weight: bold; font-size: 1.2em; }
        .insights li strong { font-weight: 600; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Pareto Analysis - Revenue Distribution</h1>
        <p>April to December 2025 | 80/20 Rule Analysis</p>
    </div>

    <div class="metrics-grid">
        <div class="metric-card all">
            <div class="metric-label">All Accounts</div>
            <div class="metric-value">â‚¹495.2M</div>
            <div class="metric-subtitle">231 brands | Top 97 (42%) = 80% revenue</div>
        </div>
        <div class="metric-card mea">
            <div class="metric-label">MEA Focus</div>
            <div class="metric-value">â‚¹301.7M</div>
            <div class="metric-subtitle">95 brands | Top 40 (42%) = 80% revenue</div>
        </div>
        <div class="metric-card rc">
            <div class="metric-label">RC MEA</div>
            <div class="metric-value">â‚¹193.5M</div>
            <div class="metric-subtitle">136 brands | Top 64 (47%) = 80% revenue</div>
        </div>
    </div>

    <div class="charts-section">
        <div class="chart-container">
            <div class="chart-title">Revenue Concentration (Pareto) â€“ All Accounts</div>
            <canvas id="paretoAllChart" height="320"></canvas>
        </div>
        <div class="chart-container">
            <div class="chart-title">Revenue Concentration (Pareto) â€“ MEA Focus</div>
            <canvas id="paretoMeaChart" height="260"></canvas>
        </div>
        <div class="chart-container">
            <div class="chart-title">Revenue Concentration (Pareto) â€“ RC MEA</div>
            <canvas id="paretoRcChart" height="280"></canvas>
        </div>
    </div>

    <div class="insights">
        <h2>ðŸ“Š Key Pareto Insights</h2>
        <ul>
            <li><strong>80/20 Rule Confirmed:</strong> Across all segments, 42â€“47% of brands generate 80% of revenue â€” a classic Pareto pattern. Revenue is meaningfully concentrated but not dangerously so.</li>
            <li><strong>Top 5 Brands = â‚¹83M (15% of total):</strong> Snapp (â‚¹28.9M), Airtel Group (â‚¹16.1M), Visa USA (â‚¹15.2M), PlatinumList.net (â‚¹13.7M), and Divar (â‚¹9.3M) together drive nearly one-sixth of all revenue â€” no single brand dominates alone.</li>
            <li><strong>MEA Focus is More Concentrated:</strong> Only 40 brands reach 80% in MEA Focus vs 64 in RC MEA. MEA Focus accounts are higher-value on average, so fewer brands carry the bulk.</li>
            <li><strong>RC MEA Has a Flatter Curve:</strong> Revenue is more evenly spread â€” the top brand (Blu Bank at â‚¹7.2M) is under 4% of RC total. This means no single account loss would hit RC as hard as losing Snapp would hit MEA Focus.</li>
            <li><strong>Long Tail is Large:</strong> The bottom ~134 brands contribute only 20% of total revenue (â‚¹99M). These are high-count, low-value accounts â€” a growth or consolidation play here could improve portfolio efficiency.</li>
            <li><strong>Strategic Focus:</strong> Retention of the top 97 brands is critical to protecting 80% of revenue. Any churn in this group directly and immediately impacts the top line.</li>
        </ul>
    </div>
</div>

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// All data goes up to ~83% cumulative so the 80% threshold line is clearly visible crossing the curve.
// eighty_idx = 0-based index of the bar where cumulative first crosses 80%.
// Bars at or before eighty_idx are dark blue; bars after are light grey (the "remaining 20%" tail).

const allNames   = ["Snapp","Airtel Group","Visa USA","PlatinumList.net","Divar","Darwish Holding","Mazeed By Zid","Laverne &Assaf","Asan Pardakht","Blu Bank| Investintek","Your Tango","Fashion.sa","Mawsim","Nice","Al Yasra","Arabian Oud Co","Almanea","The Sultan Center","OG Money","Cleargrid","SAT","Travel Start","Baly","Wego","Sony Middle East","Shaw Academy","Technolife","Alibaba","Basalam","Mr Bilit","ReflexMD","MR MANDOOB","Azki","Sobha LLC","HNAK,Shababuna","Okala","Midas Furniture","Qasr Al Awani","Halan","Fly today","Doctoreto","Junaid Jamshed","Flynas","Travelwings","Black Box","Aloo Lahma Meat","Tapsi","Zatca","Btech","Jabama","Thasaamah","Soum","Milli Gold","Bfab","Sony World KSA","Return Blockchain","Tasheel Finance","O! MILLIONAIRE","Job Vision","Dirham Fin. Tech","Ebdaa Digital","Raya Electronics","Blends","TBO Holidays","Valu","United Pharmacy","Whites Kunooz","Bitpin","Fibidi","Kaspersky","Hasti","Azkivam","Baby Story","TabDeal","Alkhunaizan Co","TireEx","Saraf App","Amlak","Redsea","Abdulwahed","Bimebazar","Biimeh","Tamkeen","Taaghche","Labayh","Saltside","Itoll","Weargo","Tameeni Insurance","Hamrahcard","Tara 360","Elyak Sumaya","Go Bus","Tapsifood","Technogold","Tabib Group","Bookyogaretreats","Bit24","Khanoumi","Shopcash","Tamra Capital","Al Daham"];
const allRev     = [28860825.32,16094743.57,15182846.86,13704498.0,9345610.8,8010744.18,7981684.6,7511459.43,7410084.98,7178017.96,6718859.31,6526627.77,5768966.71,5721224.21,5601088.45,5522675.7,5502555.56,5242475.31,5195529.88,5112635.92,5062455.0,4987342.22,4902337.8,4678102.91,4640533.19,4630901.94,4591137.59,4542453.88,4307601.32,4306901.25,4279617.45,4072521.27,3854863.37,3847483.39,3671147.3,3655451.31,3646746.07,3622128.96,3610935.28,3594896.78,3592280.69,3441484.89,3417848.81,3410580.4,3379577.37,3378304.35,3353377.27,3287072.59,3281958.17,3120760.93,3093541.58,3088931.65,3053038.04,2978812.65,2970860.03,2949750.89,2708394.62,2652174.56,2641513.51,2628029.15,2494799.55,2494106.29,2454096.92,2444178.02,2360620.16,2250429.53,2249969.32,2222867.46,2169473.06,2144701.18,2131963.57,2092639.81,2088695.6,2075576.3,2003478.82,1983075.55,1977310.3,1909716.18,1901677.71,1887200.41,1872383.92,1840919.22,1818629.91,1781612.45,1775020.76,1764119.71,1735573.47,1706936.4,1703219.9,1700027.45,1683737.35,1680834.46,1661507.64,1655177.11,1583890.98,1571193.78,1529704.37,1527877.33,1520886.26,1517458.21,1492033.18,1489623.5];
const allCum     = [5.83,9.08,12.14,14.91,16.8,18.42,20.03,21.55,23.04,24.49,25.85,27.17,28.33,29.49,30.62,31.73,32.84,33.9,34.95,35.98,37.01,38.01,39.0,39.95,40.88,41.82,42.75,43.66,44.53,45.4,46.27,47.09,47.87,48.65,49.39,50.13,50.86,51.59,52.32,53.05,53.77,54.47,55.16,55.85,56.53,57.21,57.89,58.55,59.22,59.85,60.47,61.09,61.71,62.31,62.91,63.51,64.06,64.59,65.12,65.65,66.16,66.66,67.16,67.65,68.13,68.58,69.04,69.49,69.92,70.36,70.79,71.21,71.63,72.05,72.46,72.86,73.26,73.64,74.03,74.41,74.78,75.16,75.52,75.88,76.24,76.6,76.95,77.29,77.64,77.98,78.32,78.66,79.0,79.33,79.65,79.97,80.28,80.58,80.89,81.2,81.5,81.8];
const allEighty  = 96; // index where cum crosses 80%

const meaNames   = ["Snapp","Airtel Group","Visa USA","PlatinumList.net","Divar","Darwish Holding","Mazeed By Zid","Laverne &Assaf","Asan Pardakht","Your Tango","Nice","Al Yasra","Arabian Oud Co","Almanea","The Sultan Center","OG Money","Cleargrid","SAT","Travel Start","Wego","Sony Middle East","Alibaba","Basalam","MR MANDOOB","Sobha LLC","HNAK,Shababuna","Midas Furniture","Qasr Al Awani","Halan","Flynas","Black Box","Aloo Lahma Meat","Btech","Soum","Bfab","Sony World KSA","Tasheel Finance","O! MILLIONAIRE","Ebdaa Digital","Raya Electronics","Blends","Valu","United Pharmacy","Whites Kunooz","Kaspersky"];
const meaRev     = [28860825.32,16094743.57,15182846.86,13704498.0,9345610.8,8010744.18,7981684.6,7511459.43,7410084.98,6718859.31,5721224.21,5601088.45,5522675.7,5502555.56,5242475.31,5195529.88,5112635.92,5062455.0,4987342.22,4678102.91,4640533.19,4542453.88,4307601.32,4072521.27,3847483.39,3671147.3,3646746.07,3622128.96,3610935.28,3417848.81,3379577.37,3378304.35,3281958.17,3088931.65,2978812.65,2970860.03,2708394.62,2652174.56,2494799.55,2494106.29,2454096.92,2360620.16,2250429.53,2249969.32,2144701.18];
const meaCum     = [9.57,14.9,19.93,24.48,27.58,30.23,32.88,35.37,37.82,40.05,41.95,43.8,45.63,47.46,49.2,50.92,52.61,54.29,55.94,57.49,59.03,60.54,61.97,63.32,64.59,65.81,67.02,68.22,69.41,70.55,71.67,72.79,73.88,74.9,75.89,76.87,77.77,78.65,79.48,80.3,81.12,81.9,82.64,83.39,84.1];
const meaEighty  = 39;

const rcNames    = ["Blu Bank| Investintek","Fashion.sa","Mawsim","Baly","Shaw Academy","Technolife","Mr Bilit","ReflexMD","Azki","Okala","Fly today","Doctoreto","Junaid Jamshed","Travelwings","Tapsi","Zatca","Jabama","Thasaamah","Milli Gold","Return Blockchain","Job Vision","Dirham Fin. Tech","TBO Holidays","Bitpin","Fibidi","Hasti","Azkivam","TabDeal","Alkhunaizan Co","Saraf App","Bimebazar","Biimeh","Taaghche","Saltside","Itoll","Weargo","Hamrahcard","Tara 360","Tapsifood","Technogold","Tabib Group","Bookyogaretreats","Bit24","Khanoumi","B8ak","Al Harfash","Namava","MIS Pay","Dr Saina","Jameia","Nikpardakht","IraniCard","Ramzinex","Farabi","Melligold","Blue Bus Egypt","sastaticket","AbanTether","Maktabkhooneh","Utravs","Safir Stores","SDC Cards","Centro Comercial","English Place","Sanar Trading","Greenola","Amaani","Blis","Dvago"];
const rcRev      = [7178017.96,6526627.77,5768966.71,4902337.8,4630901.94,4591137.59,4306901.25,4279617.45,3854863.37,3655451.31,3594896.78,3592280.69,3441484.89,3410580.4,3353377.27,3287072.59,3120760.93,3093541.58,3053038.04,2949750.89,2641513.51,2628029.15,2444178.02,2222867.46,2169473.06,2131963.57,2092639.81,2075576.3,2003478.82,1977310.3,1872383.92,1840919.22,1781612.45,1764119.71,1735573.47,1706936.4,1700027.45,1683737.35,1655177.11,1583890.98,1571193.78,1529704.37,1527877.33,1520886.26,1442462.76,1440915.84,1428530.05,1426261.87,1420014.65,1397466.58,1339284.4,1337067.93,1335603.31,1335149.57,1334209.0,1305390.51,1301787.36,1295300.17,1293726.19,1262235.25,1254049.77,1251719.09,1227101.31,1204980.39,1183350.43,1174898.55,1172561.39,1166779.17,1164924.18];
const rcCum      = [3.71,7.08,10.06,12.6,14.99,17.36,19.59,21.8,23.79,25.68,27.54,29.39,31.17,32.93,34.67,36.36,37.98,39.58,41.15,42.68,44.04,45.4,46.66,47.81,48.93,50.03,51.12,52.19,53.22,54.25,55.21,56.16,57.08,58.0,58.89,59.77,60.65,61.52,62.38,63.2,64.01,64.8,65.59,66.37,67.12,67.86,68.6,69.34,70.07,70.8,71.49,72.18,72.87,73.56,74.25,74.92,75.6,76.26,76.93,77.59,78.23,78.88,79.51,80.14,80.75,81.36,81.96,82.56,83.17];
const rcEighty   = 63;

// â”€â”€â”€ CHART BUILDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function createParetoChart(canvasId, names, revRaw, cumulative, eightyIdx, fullTotal, fullCount) {
    const revM = revRaw.map(v => v / 1000000);

    // Split into two datasets: top group (dark blue) and tail (grey)
    const topCount  = eightyIdx + 1;
    const topRevM   = revM.map((v, i) => i <= eightyIdx ? v : null);
    const tailRevM  = revM.map((v, i) => i > eightyIdx  ? v : null);

    new Chart(document.getElementById(canvasId), {
        type: 'bar',
        data: {
            labels: names,
            datasets: [
                {
                    type: 'bar',
                    label: `Top ${topCount} customers (~80% revenue)`,
                    data: topRevM,
                    backgroundColor: '#1e3a8acc',
                    borderColor: '#1e3a8a',
                    borderWidth: 1,
                    yAxisID: 'y',
                    order: 2
                },
                {
                    type: 'bar',
                    label: `Remaining customers (~20% revenue)`,
                    data: tailRevM,
                    backgroundColor: '#cbd5e1aa',
                    borderColor: '#94a3b8',
                    borderWidth: 1,
                    yAxisID: 'y',
                    order: 2
                },
                {
                    type: 'line',
                    label: 'Cumulative Revenue %',
                    data: cumulative,
                    borderColor: '#e11d48',
                    borderWidth: 2.5,
                    fill: false,
                    yAxisID: 'y1',
                    tension: 0.15,
                    pointRadius: 2,
                    pointBackgroundColor: '#e11d48',
                    order: 1
                },
                {
                    type: 'line',
                    label: '80% Threshold',
                    data: Array(names.length).fill(80),
                    borderColor: '#10b981',
                    borderWidth: 2.5,
                    borderDash: [10, 5],
                    fill: false,
                    yAxisID: 'y1',
                    pointRadius: 0,
                    order: 0
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            interaction: { mode: 'index', intersect: false },
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                    labels: {
                        usePointStyle: true,
                        padding: 16,
                        font: { size: 11, weight: '600' }
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(30, 41, 59, 0.97)',
                    padding: 14,
                    titleFont: { size: 13, weight: 'bold' },
                    bodyFont: { size: 12 },
                    cornerRadius: 8,
                    callbacks: {
                        label: function(context) {
                            if (context.datasetIndex === 0 || context.datasetIndex === 1) {
                                const val = context.parsed.y;
                                if (val === null) return null;
                                return 'Revenue: â‚¹' + val.toFixed(2) + 'M';
                            }
                            if (context.datasetIndex === 2) return 'Cumulative: ' + context.parsed.y.toFixed(1) + '%';
                            return null;
                        }
                    }
                }
            },
            scales: {
                x: {
                    grid: { display: false },
                    ticks: {
                        font: { size: names.length > 80 ? 5.5 : names.length > 50 ? 6.5 : 7.5 },
                        color: '#64748b',
                        maxRotation: 90,
                        minRotation: 90,
                        autoSkip: false,
                        maxTicksLimit: names.length
                    }
                },
                y: {
                    type: 'linear',
                    position: 'left',
                    title: { display: true, text: 'Revenue', font: { size: 12, weight: '600' }, color: '#1e293b' },
                    ticks: { callback: value => value.toFixed(1) + 'M', color: '#64748b' },
                    grid: { color: 'rgba(148, 163, 184, 0.15)' }
                },
                y1: {
                    type: 'linear',
                    position: 'right',
                    min: 0, max: 100,
                    title: { display: true, text: 'Cumulative %', font: { size: 12, weight: '600' }, color: '#1e293b' },
                    ticks: { callback: value => value + '%', color: '#64748b' },
                    grid: { display: false }
                }
            }
        }
    });

    const canvas = document.getElementById(canvasId);
    const top80Rev  = revRaw.slice(0, eightyIdx + 1).reduce((a, b) => a + b, 0);
    const tailRev   = fullTotal - top80Rev;
    const top5Rev   = revRaw.slice(0, 5).reduce((a, b) => a + b, 0);
    const top5Pct   = ((top5Rev / fullTotal) * 100).toFixed(1);
    const topPct    = ((top80Rev / fullTotal) * 100).toFixed(1);
    const tailPct   = ((tailRev / fullTotal) * 100).toFixed(1);
    const tailCount = fullCount - topCount;

    const box = document.createElement('div');
    box.style.cssText = 'margin-top:16px;padding:14px 18px;background:#fefce8;border:1px solid #eab308;border-radius:8px;font-size:0.82em;color:#333;line-height:1.9;';
    box.innerHTML =
        '<strong>KEY INSIGHTS</strong><br>' +
        'â€¢ Total Revenue: â‚¹' + (fullTotal/1e6).toFixed(1) + 'M | Total Customers: ' + fullCount + '<br>' +
        'â€¢ Top ' + topCount + ' customers (' + ((topCount/fullCount)*100).toFixed(0) + '%) â†’ ' + topPct + '% of revenue (â‚¹' + (top80Rev/1e6).toFixed(1) + 'M)<br>' +
        'â€¢ Remaining ' + tailCount + ' customers (' + ((tailCount/fullCount)*100).toFixed(0) + '%) â†’ ' + tailPct + '% of revenue (â‚¹' + (tailRev/1e6).toFixed(1) + 'M)<br>' +
        'â€¢ Top 5 customers alone represent ' + top5Pct + '% of revenue';
    canvas.parentNode.appendChild(box);
}

createParetoChart('paretoAllChart',  allNames,  allRev,  allCum,  allEighty,  495205711.43, 231);
createParetoChart('paretoMeaChart',  meaNames,  meaRev,  meaCum,  meaEighty,  301678871.22,  95);
createParetoChart('paretoRcChart',   rcNames,   rcRev,   rcCum,   rcEighty,   193526840.21, 136);
</script>
</body>
</html>
